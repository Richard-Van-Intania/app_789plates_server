async fn my_middleware1(request: Request, next: Next) -> Response {
    // do something with `request`...
    println!("hello from my_middleware1 in at {}", Local::now());
    sleep(time::Duration::from_secs(10)).await;

    let response = next.run(request).await;

    // do something with `response`...
    println!("hello from my_middleware1 out at {}", Local::now());
    sleep(time::Duration::from_secs(1)).await;

    response
}

async fn my_middleware2(request: Request, next: Next) -> Response {
    // do something with `request`...
    println!("hello from my_middleware2 in at {}", Local::now());
    sleep(time::Duration::from_secs(1)).await;

    let response = next.run(request).await;

    // do something with `response`...
    println!("hello from my_middleware2  out at {}", Local::now());
    sleep(time::Duration::from_secs(1)).await;

    response
}

async fn my_middleware3(request: Request, next: Next) -> Response {
    // do something with `request`...
    // request turn

    let response = next.run(request).await;

    // do something with `response`...
    // response turn

    response
}

async fn validate_email(request: Request, next: Next) -> Response {
    // do something with `request`...
    // request turn

    let response = next.run(request).await;

    // do something with `response`...
    // response turn

    response
}



// async fn test(Json(payload): Json<Authentication>) -> impl IntoResponse {}

// async fn test_middleware(request: Request<Json<Authentication>>, next: Next) -> impl IntoResponse {
//     let (parts, mut body) = request.into_parts();
//     body.0.email = body.0.email.to_lowercase();

//     let (_, body) = Json::into_response(body).into_parts();

//     // let bytes = body.collect().await.to_bytes();
//     // let x = Body::collect(body.);

//     // let request0 = Request::from_parts(parts, body);
//     // do something with `request`...

//     let response = next.run(Request::from_parts(parts, body)).await;

//     // do something with `response`...

//     response
// }